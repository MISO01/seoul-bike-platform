<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>서울시 공공자전거 정책지원 플랫폼 - 따릉따릉팀</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #15AD58;
            --primary-dark: #0E8C46;
            --secondary: #1D64A6;
            --secondary-dark: #0F4876;
            --gray-dark: #454545;
            --gray-medium: #767676;
            --gray-light: #E5E5E5;
            --white: #FFFFFF;
        }
        body {
            font-family: 'Noto Sans KR', sans-serif;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        .section {
            min-height: 100vh;
            padding: 40px 0;
            display: none;
        }
        .section.active {
            display: block;
        }
        #landing {
            background: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)), url('https://www.seoul.go.kr/res_map/images/bg_map_new.png');
            background-size: cover;
            background-position: center;
        }
        .btn-primary {
            background-color: var(--primary);
            color: white;
            padding: 12px 24px;
            font-weight: 500;
            border-radius: 6px;
            transition: all 0.3s;
        }
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
            padding: 12px 24px;
            font-weight: 500;
            border-radius: 6px;
            transition: all 0.3s;
        }
        .btn-secondary:hover {
            background-color: var(--secondary-dark);
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: all 0.3s;
        }
        .card:hover {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
        }
        .status-card {
            background-color: var(--primary);
            color: white;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 14px;
            font-weight: 500;
        }
        #map {
            height: 600px;
            width: 100%;
            border-radius: 8px;
            z-index: 1;
        }
        #map-dongdaemun {
            height: 500px;
            width: 100%;
            border-radius: 8px;
            z-index: 1;
        }
        #detail-map {
            height: 400px;
            width: 100%;
            border-radius: 8px;
            z-index: 1;
        }
        #efficient-stations-map-container {
            height: 250px;
            width: 100%;
            border-radius: 8px;
            z-index: 1;
        }
        .district {
            fill: #ccc;
            stroke: #fff;
            stroke-width: 1px;
            cursor: pointer;
            transition: fill 0.3s;
        }
        .district:hover {
            fill: var(--primary);
        }
        .dongdaemun {
            fill: var(--primary);
        }
        .coming-soon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            border-radius: 8px;
            font-weight: 500;
        }
        .navbar {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .statistic-card {
            background: white;
            border-left: 4px solid var(--primary);
            border-radius: 4px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .nav-item {
            cursor: pointer;
            padding: 10px 15px;
            color: var(--gray-dark);
            transition: all 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-item:hover, .nav-item.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }
        .chat-message {
            border-radius: 18px;
            padding: 10px 15px;
            margin-bottom: 10px;
            max-width: 80%;
        }
        .user-message {
            background-color: var(--gray-light);
            margin-left: auto;
            border-top-right-radius: 4px;
        }
        .ai-message {
            background-color: var(--primary);
            color: white;
            margin-right: auto;
            border-top-left-radius: 4px;
        }
        .chart-container {
            height: 300px;
            margin: 20px 0;
        }
        /* Toggle Switch */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--primary);
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: var(--gray-light);
            border-radius: 4px;
            position: relative;
            height: 8px;
            margin: 15px 0;
        }
        .progress-bar {
            height: 100%;
            border-radius: 4px;
            background-color: var(--primary);
            transition: width 0.5s ease-in-out;
        }
        /* Custom Radio Button */
        .custom-radio {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer;
        }
        .custom-radio-input {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid var(--gray-medium);
            border-radius: 50%;
            outline: none;
            margin-right: 10px;
            position: relative;
        }
        .custom-radio-input:checked {
            border-color: var(--primary);
        }
        .custom-radio-input:checked::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--primary);
        }
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        /* Loading */
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: var(--primary);
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        .data-table th {
            background-color: #f3f4f6;
            padding: 8px 12px;
            text-align: left;
            font-weight: 500;
            border-bottom: 2px solid #e5e7eb;
        }
        .data-table td {
            padding: 8px 12px;
            border-bottom: 1px solid #e5e7eb;
        }
        .data-table tr:hover {
            background-color: #f9fafb;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar py-3 px-6 flex justify-between items-center">
        <div class="flex items-center">
            <img src="images/seoul_logo.png" alt="서울특별시 로고" class="h-10">
        </div>
        <div class="hidden md:flex">
            <div class="nav-item" onclick="showSection('landing')">홈</div>
            <div class="nav-item" onclick="showSection('districts')">지역 선택</div>
            <div class="nav-item" onclick="showSection('districts')">동대문구 분석</div>
            <div class="nav-item" onclick="showSection('station-detail')">대여소 상세</div>
            <div class="nav-item" onclick="showSection('ai-agent')">AI 정책 도우미</div>
            <div class="nav-item" onclick="showSection('admin')">관리자</div>
        </div>
        <div class="md:hidden">
            <button class="p-2" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden bg-white w-full shadow-md p-4 md:hidden">
        <div class="nav-item py-2" onclick="showSection('landing'); toggleMobileMenu();">홈</div>
        <div class="nav-item py-2" onclick="showSection('districts'); toggleMobileMenu();">지역 선택</div>
        <div class="nav-item py-2" onclick="showSection('districts'); toggleMobileMenu();">동대문구 분석</div>
        <div class="nav-item py-2" onclick="showSection('station-detail'); toggleMobileMenu();">대여소 상세</div>
        <div class="nav-item py-2" onclick="showSection('ai-agent'); toggleMobileMenu();">AI 정책 도우미</div>
        <div class="nav-item py-2" onclick="showSection('admin'); toggleMobileMenu();">관리자</div>
    </div>

    <!-- Landing Page -->
    <section id="landing" class="section active px-4">
        <div class="container mx-auto flex flex-col items-center justify-center min-h-screen">
            <div class="max-w-4xl text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-4 text-gray-800">데이터로 따릉이를 설계하다</h1>
                <p class="text-xl md:text-2xl mb-8 text-gray-600">서울시 공무원을 위한 정책 분석 플랫폼</p>
                <p class="text-md md:text-lg mb-12 text-gray-600">
                    공공자전거 운영 데이터를 더 빠르게, 더 정확하게,<br>
                    그리고 더 실무에 밀착되게 사용할 수 있도록 돕는 도구입니다.<br>
                    정책 설계자의 판단력에, 데이터의 정밀함을 더합니다.
                </p>
                <div class="flex flex-col md:flex-row justify-center gap-4">
                    <button class="btn-primary" onclick="showSection('districts')">분석 시작하기</button>
                    <button class="btn-secondary" onclick="showSection('ai-agent')">AI에게 물어보기</button>
                </div>
            </div>
            
            <div class="my-20 max-w-5xl">
                <h2 class="text-2xl font-bold mb-6 text-center">왜 지금 이 플랫폼이 필요한가?</h2>
                <p class="text-md mb-6 text-gray-600 text-center">
                    서울시와 각 자치구는 이미 다양한 데이터를 기반으로<br>
                    공공자전거 정책을 설계하고 실행해왔습니다.
                </p>
                <p class="text-md mb-6 text-gray-600 text-center">
                    그러나 현장에서는 여전히 이런 목소리가 존재합니다:
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                    <div class="card">
                        <div class="text-4xl text-center text-primary mb-4"><i class="fas fa-search"></i></div>
                        <p class="text-gray-600 italic text-center">"내가 궁금한 데이터를 직접 확인할 수 있었으면 좋겠다."</p>
                    </div>
                    <div class="card">
                        <div class="text-4xl text-center text-primary mb-4"><i class="fas fa-sync-alt"></i></div>
                        <p class="text-gray-600 italic text-center">"거치대를 줄이면 회전율이 어떻게 바뀔지 시뮬레이션해보고 싶다."</p>
                    </div>
                    <div class="card">
                        <div class="text-4xl text-center text-primary mb-4"><i class="fas fa-chart-line"></i></div>
                        <p class="text-gray-600 italic text-center">"보고서를 위해 수작업 통계작업을 반복하지 않았으면…"</p>
                    </div>
                </div>
                <p class="text-md mt-12 text-gray-600 text-center">
                    이 플랫폼은 그런 행정 실무의 목소리에서 출발했습니다.<br><br>
                    정책 데이터를 단순히 '보는' 것을 넘어서,<br>
                    직접 질문하고, 직접 조작하고, 직접 판단할 수 있게 만드는 플랫폼.<br>
                    그것이 우리가 만들고자 한 것입니다.
                </p>
            </div>
            
            <div class="my-20 max-w-5xl">
                <h2 class="text-2xl font-bold mb-6 text-center">지금 할 수 있는 일, 그리고 앞으로 더 할 수 있는 일</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                    <div class="card">
                        <h3 class="text-xl font-semibold mb-4 text-center">지금 제공하는 기능</h3>
                        <p class="text-md mb-6 text-gray-600">
                            지금은 동대문구 2024년 데이터를 기반으로 다음 기능을 제공합니다:
                        </p>
                        <ul class="text-gray-600 space-y-2">
                            <li><i class="fas fa-check text-primary mr-2"></i> 대여소별 회전율·불균형 지수·중심성 시각화</li>
                            <li><i class="fas fa-check text-primary mr-2"></i> 지도 기반 구 선택 및 대시보드 분석</li>
                            <li><i class="fas fa-check text-primary mr-2"></i> AI 에이전트에게 질문하여 정책 시뮬레이션 응답 받기</li>
                            <li><i class="fas fa-check text-primary mr-2"></i> 주요 지표 PDF로 리포트 출력</li>
                        </ul>
                        <div class="mt-6">
                            <a href="https://dsbildqk.gensparkspace.com/" target="_blank" class="btn-primary w-full block text-center">동대문구 2024년 분석현황 보기</a>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="text-xl font-semibold mb-4 text-center">향후 확장 예정 기능</h3>
                        <p class="text-md mb-6 text-gray-600">
                            📈 향후 확장 예정 기능:
                        </p>
                        <ul class="text-gray-600 space-y-2">
                            <li><i class="fas fa-arrow-right text-secondary mr-2"></i> 자치구별 CSV 업로드 시 자동 분석</li>
                            <li><i class="fas fa-arrow-right text-secondary mr-2"></i> 서울 전역 전체 연도 데이터 연동</li>
                            <li><i class="fas fa-arrow-right text-secondary mr-2"></i> 서울맵, 기상, 유동인구 API 연결</li>
                            <li><i class="fas fa-arrow-right text-secondary mr-2"></i> LangChain 기반 AI 정책 도우미 정식 탑재</li>
                            <li><i class="fas fa-arrow-right text-secondary mr-2"></i> 신규 대여소 입지 추천 자동화</li>
                        </ul>
                    </div>
                </div>
                <p class="text-md mt-8 text-gray-600 text-center">
                    이 플랫폼은 기술 시연이 아닙니다.<br>
                    현장의 정책 실무를 더 빠르고 쉽게 실행하게 하는, 실제 행정도구입니다.
                </p>
            </div>
            
            <div class="my-20 max-w-5xl">
                <h2 class="text-2xl font-bold mb-6 text-center">국토교통부와 이 플랫폼의 관계는?</h2>
                <p class="text-md mb-6 text-gray-600 text-center">
                    이 프로젝트는 국토교통부 2025 데이터 활용 경진대회를 통해 제안되었습니다.
                </p>
                <div class="card mb-8">
                    <h3 class="text-xl font-semibold mb-4">왜 국토부인가요?</h3>
                    <p class="text-gray-600 mb-4">
                        공공자전거는 단순한 교통 수단이 아니라<br>
                        도시 공간, 인구 흐름, 시간대별 생활권을 보여주는 살아있는 교통 데이터입니다.
                    </p>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-4">국토부는 지금,</h3>
                    <ul class="text-gray-600 space-y-2">
                        <li><i class="fas fa-angle-right text-primary mr-2"></i> 데이터 기반 국토관리</li>
                        <li><i class="fas fa-angle-right text-primary mr-2"></i> 공공 인프라 운영의 효율화</li>
                        <li><i class="fas fa-angle-right text-primary mr-2"></i> 스마트 모빌리티 정책 실행</li>
                        <li><i class="fas fa-angle-right text-primary mr-2"></i> 행정·AI 연계 분석 체계 구축</li>
                    </ul>
                    <p class="text-gray-600 mt-4">
                        을 핵심 과제로 추진하고 있습니다.
                    </p>
                </div>
                <p class="text-md mt-8 text-gray-600 text-center">
                    이 플랫폼은 그 과제를 실제로 작동하는 행정도구로 구현한 사례입니다.<br>
                    이미 있는 데이터를 더 실용적이고 연결되게 만드는 것,<br>
                    그것이 우리가 국토교통 데이터 활용 주제로 이 플랫폼을 제안한 이유입니다.
                </p>
            </div>
            
            <div class="my-20 max-w-5xl">
                <h2 class="text-2xl font-bold mb-6 text-center">우리가 만들고 싶은 행정의 미래</h2>
                <p class="text-md mb-6 text-gray-600 text-center">
                    우리는 공무원이 더 능동적으로, 더 빠르게, 더 자신 있게 데이터를 다룰 수 있기를 바랍니다.
                </p>
                <p class="text-md mb-6 text-gray-600 text-center">
                    이미 존재하는 정책 데이터에 실시간 시각화, AI 시뮬레이션, 자동 리포트 기능을 덧붙이면,<br>
                    행정은 더욱 민첩하고 설득력 있게 움직일 수 있습니다.
                </p>
                <p class="text-md mb-6 text-gray-600 text-center">
                    이 플랫폼은 '따릉이'에서 시작하지만,<br>
                    교통, 공간, 환경, 안전 모든 분야로 확장될 수 있는 첫 발걸음입니다.
                </p>
                
                <div class="bg-gray-50 p-6 rounded-lg mt-12 text-center">
                    <p class="text-lg font-medium text-gray-800">
                        정책 설계자는 이미 전문가입니다.<br>
                        우리는 그 전문가가 더 나은 결정을 내릴 수 있도록 도와주는 도구를 만들고 있을 뿐입니다.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Districts Selection Page -->
    <section id="districts" class="section px-4">
        <div class="container mx-auto py-10">
            <h2 class="text-3xl font-bold mb-8 text-center">서울시 자치구별 따릉이 현황</h2>
            <p class="text-lg text-center mb-8">분석하고자 하는 자치구를 선택해주세요</p>
            
            <div class="flex flex-col md:flex-row gap-8">
                <div class="md:w-3/4">
                    <div id="map" class="relative">
                        <!-- Map will be rendered here -->
                    </div>
                </div>
                <div class="md:w-1/4">
                    <div class="card mb-6">
                        <h3 class="text-xl font-semibold mb-4">서울시 전체 현황</h3>
                        <div class="mb-3">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm text-gray-600">총 대여소</span>
                                <span class="font-semibold">2,680개</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm text-gray-600">총 이용건수</span>
                                <span class="font-semibold">3,720만 건</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm text-gray-600">회전율 평균</span>
                                <span class="font-semibold">1.4회/일</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar" style="width: 70%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 class="text-xl font-semibold mb-4">사용 방법</h3>
                        <ul class="text-gray-600 space-y-2">
                            <li><i class="fas fa-circle-info text-primary mr-2"></i> 지도에서 자치구를 선택하면 해당 구의 상세 분석 결과를 볼 수 있습니다.</li>
                            <li><i class="fas fa-circle-info text-primary mr-2"></i> 현재 동대문구의 분석 결과만 제공됩니다.</li>
                            <li><i class="fas fa-circle-info text-primary mr-2"></i> 다른 자치구는 순차적으로 업데이트될 예정입니다.</li>
                        </ul>
                        <div class="mt-6">
                            <button class="btn-primary w-full" onclick="showSection('station-detail')">대여소 상세 분석 보기</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Station Detail Analysis Page -->
    <section id="station-detail" class="section px-4">
        <div class="container mx-auto py-10">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">대여소 상세 분석</h2>
                <div class="flex items-center">
                    <select id="station-filter" class="mr-3 p-2 border rounded">
                        <option value="usage">이용량 상위순</option>
                        <option value="imbalance">불균형 심한 순</option>
                        <option value="turnover-low">회전율 낮은 순</option>
                        <option value="turnover-high">회전율 높은 순</option>
                    </select>
                    <button class="btn-secondary" onclick="applyFilter()">필터</button>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-1">
                    <div class="card h-full overflow-y-auto" style="max-height: 700px;">
                        <h3 class="text-xl font-semibold mb-4">대여소 목록</h3>
                        <div class="relative">
                            <input type="text" placeholder="대여소 검색" class="w-full p-2 border rounded mb-4 pl-8">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                        
                        <div class="space-y-3">
                            <!-- Station data will be dynamically added here -->
                        </div>
                    </div>
                </div>
                
                <div class="lg:col-span-2">
                    <div class="card mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold">회기역 2-①번출구 (ID: 2933) 상세 분석</h3>
                            <span class="text-xs bg-green-500 text-white px-2 py-1 rounded">핫스팟</span>
                        </div>
                        <div class="mb-4">
                            <div id="detail-map">
                                <!-- Map will be rendered here -->
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                            <div>
                                <h4 class="font-medium mb-2">대여소 정보</h4>
                                <table class="w-full text-sm">
                                    <tr>
                                        <td class="py-1 text-gray-600">주소</td>
                                        <td>서울특별시 동대문구 휘경동 267-10</td>
                                    </tr>
                                    <tr>
                                        <td class="py-1 text-gray-600">거치대 수</td>
                                        <td>8개</td>
                                    </tr>
                                    <tr>
                                        <td class="py-1 text-gray-600">설치일</td>
                                        <td>2018-05-15</td>
                                    </tr>
                                    <tr>
                                        <td class="py-1 text-gray-600">주변 시설</td>
                                        <td>지하철역, 대학교, 상업시설</td>
                                    </tr>
                                </table>
                            </div>
                            <div>
                                <h4 class="font-medium mb-2">이용 현황</h4>
                                <table class="w-full text-sm">
                                    <tr>
                                        <td class="py-1 text-gray-600">일평균 대여</td>
                                        <td>28.4회</td>
                                    </tr>
                                    <tr>
                                        <td class="py-1 text-gray-600">회전율</td>
                                        <td>3.5회/일 (서울시 평균 1.4배)</td>
                                    </tr>
                                    <tr>
                                        <td class="py-1 text-gray-600">불균형 지수</td>
                                        <td>0.87 (대여 > 반납)</td>
                                    </tr>
                                    <tr>
                                        <td class="py-1 text-gray-600">첨두시간</td>
                                        <td>오전 8-9시, 오후 18-19시</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mb-6">
                        <h3 class="text-xl font-semibold mb-4">시뮬레이션 - 거치대 조정 효과</h3>
                        <div class="flex items-center mb-6">
                            <div class="mr-6">
                                <p class="mb-2 font-medium">거치대 수 조정</p>
                                <div class="flex items-center">
                                    <button class="px-3 py-1 bg-gray-200 rounded-l font-bold" onclick="decreaseRacks()">-</button>
                                    <input type="text" id="racks-input" value="8" class="w-12 text-center border-t border-b py-1">
                                    <button class="px-3 py-1 bg-gray-200 rounded-r font-bold" onclick="increaseRacks()">+</button>
                                    <span class="ml-2 text-sm text-gray-600">현재: 8개</span>
                                </div>
                            </div>
                            <div>
                                <button class="btn-primary" onclick="runSimulation()">시뮬레이션 실행</button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div id="simulation-turnover" class="bg-green-50 p-4 rounded-md">
                                <h4 class="font-medium mb-2">회전율 변화</h4>
                                <div class="flex items-center">
                                    <div class="text-3xl font-bold text-green-600">3.5</div>
                                    <div class="ml-2 text-sm">
                                        <div class="font-medium">현재</div>
                                        <div class="text-gray-600">회/일</div>
                                    </div>
                                </div>
                                <div class="h-8 flex items-center">
                                    <i class="fas fa-arrow-right text-gray-400 mr-2"></i>
                                </div>
                                <div class="flex items-center">
                                    <div class="text-3xl font-bold text-green-600">1.9</div>
                                    <div class="ml-2 text-sm">
                                        <div class="font-medium">15개 증설 시</div>
                                        <div class="text-gray-600">회/일</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="simulation-imbalance" class="bg-blue-50 p-4 rounded-md">
                                <h4 class="font-medium mb-2">불균형 개선</h4>
                                <div class="flex items-center">
                                    <div class="text-3xl font-bold text-blue-600">0.87</div>
                                    <div class="ml-2 text-sm">
                                        <div class="font-medium">현재</div>
                                        <div class="text-gray-600">불균형 지수</div>
                                    </div>
                                </div>
                                <div class="h-8 flex items-center">
                                    <i class="fas fa-arrow-right text-gray-400 mr-2"></i>
                                </div>
                                <div class="flex items-center">
                                    <div class="text-3xl font-bold text-blue-600">0.54</div>
                                    <div class="ml-2 text-sm">
                                        <div class="font-medium">15개 증설 시</div>
                                        <div class="text-gray-600">불균형 지수</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="simulation-waiting" class="bg-red-50 p-4 rounded-md">
                                <h4 class="font-medium mb-2">대기/미사용률</h4>
                                <div class="flex items-center">
                                    <div class="text-3xl font-bold text-red-600">8%</div>
                                    <div class="ml-2 text-sm">
                                        <div class="font-medium">현재</div>
                                        <div class="text-gray-600">평균 대기율</div>
                                    </div>
                                </div>
                                <div class="h-8 flex items-center">
                                    <i class="fas fa-arrow-right text-gray-400 mr-2"></i>
                                </div>
                                <div class="flex items-center">
                                    <div class="text-3xl font-bold text-red-600">25%</div>
                                    <div class="ml-2 text-sm">
                                        <div class="font-medium">15개 증설 시</div>
                                        <div class="text-gray-600">평균 대기율</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8">
                            <canvas id="simulation-chart" width="400" height="200"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 class="text-xl font-semibold mb-4">AI 추천 및 결론</h3>
                        <div class="bg-yellow-50 p-4 rounded-md mb-4">
                            <h4 class="font-medium mb-2">최적 대여소 규모</h4>
                            <p class="text-sm">현재 대여소의 회전율(3.5회/일)이 서울시 평균(1.4회/일)을 크게 상회하고, 불균형 지수(0.87)가 높아 서비스 품질이 저하되고 있습니다. <span class="font-medium">거치대 수를 현재 8개에서 15개로 증설</span>하는 것이 적절합니다.</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-md">
                            <h4 class="font-medium mb-2">기대 효과</h4>
                            <ul class="text-sm space-y-1">
                                <li>• 사용자 서비스 개선: 첨두시간 대여 가능률 증가</li>
                                <li>• 불균형 지수 38% 감소 (0.87→0.54)</li>
                                <li>• 재배치 비용 절감: 연간 약 520만원 절감 예상</li>
                                <li>• 계절적 수요 변동에 더 유연하게 대응 가능</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Policy Agent Chat -->
    <section id="ai-agent" class="section px-4">
        <div class="container mx-auto py-10">
            <h2 class="text-3xl font-bold mb-8">AI 정책 도우미</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                <div class="lg:col-span-2">
                    <div class="card h-full flex flex-col">
                        <div class="p-3 bg-gray-100 rounded-t-lg flex justify-between items-center">
                            <h3 class="font-semibold">정책 질의응답</h3>
                            <div class="text-sm">
                                <span class="px-2 py-1 bg-green-500 text-white rounded-full text-xs">온라인</span>
                            </div>
                        </div>
                        
                        <div class="flex-grow p-4 overflow-y-auto space-y-4" style="height: 400px;" id="chat-container">
                            <div class="ai-message">
                                안녕하세요! 따릉이 정책 도우미입니다. 데이터 기반의 질문에 답변해 드립니다. 다음과 같은 질문을 해보세요:
                                <ul class="mt-2 space-y-1 text-sm">
                                    <li>• "회기역 대여소의 거치대를 늘리면 어떤 효과가 있을까요?"</li>
                                    <li>• "동대문구에서 가장 효율적인 대여소는 어디인가요?"</li>
                                    <li>• "주말과 평일의 이용 패턴 차이가 큰 대여소는?"</li>
                                    <li>• "한 달 내 설치가 필요한 대여소를 추천해주세요"</li>
                                </ul>
                            </div>
                            
                            <div class="user-message">
                                회기역 대여소의 거치대를 늘리면 어떤 효과가 있을까요?
                            </div>
                            
                            <div class="ai-message">
                                회기역 2-①번출구(ID: 2933) 대여소의 거치대를 현재 8개에서 15개로 늘리면 다음과 같은 효과가 예상됩니다:
                                
                                <ol class="mt-2 space-y-1 text-sm">
                                    <li>1. 회전율: 3.5회/일 → 1.9회/일로 감소 (적정 수준)</li>
                                    <li>2. 불균형 지수: 0.87 → 0.54로 38% 개선</li>
                                    <li>3. 첨두시간(8-9시, 18-19시) 대여 가능률: 15% → 85%로 증가</li>
                                    <li>4. 재배치 비용: 연간 약 520만원 절감 예상</li>
                                </ol>
                                
                                특히 출퇴근 시간대에 자전거 부족 문제가 크게 개선될 것으로 예상됩니다. 대여소 증설은 초기 비용이 발생하지만, 약 5개월 내에 재배치 비용 절감으로 투자금 회수가 가능합니다.
                            </div>
                            
                            <div class="user-message">
                                동대문구에서 가장 효율적인 대여소는 어디인가요?
                            </div>
                            
                            <div class="ai-message">
                                동대문구에서 가장 효율적인 대여소는 <strong>회기역 2-①번출구(ID: 2933)</strong>입니다.
                                
                                <ul class="mt-2 space-y-1 text-sm">
                                    <li>• 회전율: 3.5회/일 (구 평균 1.53회/일의 2.3배)</li>
                                    <li>• 일평균 대여건수: 28.4회 (상위 5% 이내)</li>
                                    <li>• 거치대당 수익성: 월 56,800원 (구 내 1위)</li>
                                </ul>
                                
                                그 다음으로 효율적인 대여소는:
                                <ol class="mt-1 space-y-1 text-sm">
                                    <li>2. 서울시립대 정문 앞 A(ID: 275) - 회전율 2.8회/일</li>
                                    <li>3. 청량리역 4번 5번출구 사이(ID: 2277) - 회전율 2.1회/일</li>
                                </ol>
                                
                                이 대여소들은 대중교통 연계성이 높고, 유동인구가 많은 지점에 위치해 있어 효율성이 높습니다.
                            </div>
                            
                            <div class="user-message">
                                신규 대여소 입지 추천해주세요
                            </div>
                            
                            <div class="ai-message">
                                <div class="mb-2">동대문구 내 신규 대여소 설치가 권장되는 최우선 입지 3곳은 다음과 같습니다:</div>
                                
                                <ol class="mt-2 space-y-3 text-sm">
                                    <li>
                                        <strong>1. 휘경동 주민센터 인근 (우선순위: 상)</strong><br>
                                        - 위치: 휘경동 73-2 부근<br>
                                        - 근거: 반경 500m 내 대여소 부재, 주변 인구밀도 높음(8,200명/km²)<br>
                                        - 예상 회전율: 1.8회/일 (구 평균 대비 18% 높음)<br>
                                        - 주변 환경: 주거단지, 상업시설, 버스정류장 4개
                                    </li>
                                    <li>
                                        <strong>2. 장안동 이마트 앞 (우선순위: 상)</strong><br>
                                        - 위치: 장안동 329-2 부근<br>
                                        - 근거: 상업시설 연계성, 유동인구 분석 결과(일 5,600명)<br>
                                        - 예상 회전율: 2.1회/일 (구 평균 대비 37% 높음)<br>
                                        - 혼잡도 예측: 출근시간 대여 집중, 저녁시간 반납 집중
                                    </li>
                                    <li>
                                        <strong>3. 서울시립대 후문 (우선순위: 중)</strong><br>
                                        - 위치: 전농동 197-1 부근<br>
                                        - 근거: 학생 수요 분석, 주변 대여소 불균형 완화 효과<br>
                                        - 예상 회전율: 1.7회/일<br>
                                        - 특이사항: 학기 중/방학 중 격차 고려 필요
                                    </li>
                                </ol>
                                
                                <div class="mt-2">이 추천은 인구밀도, 대중교통 접근성, 상업시설 분포, 주변 대여소 이용률, 그리고 이동 패턴 데이터를 종합적으로 분석한 결과입니다.</div>
                            </div>
                        </div>
                        
                        <div class="p-3 border-t">
                            <div class="flex">
                                <input type="text" id="chat-input" placeholder="질문을 입력하세요..." class="flex-grow p-2 border rounded-l focus:outline-none">
                                <button class="bg-primary text-white px-4 py-2 rounded-r" onclick="sendMessage()">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="flex flex-wrap gap-2 mt-2">
                                <div class="text-xs bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200" onclick="setQuestion(this)">신규 대여소 위치 추천</div>
                                <div class="text-xs bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200" onclick="setQuestion(this)">용두동 대여소 축소 시 영향</div>
                                <div class="text-xs bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200" onclick="setQuestion(this)">대여-반납 불균형 원인</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="lg:col-span-3">
                    <div class="card mb-6">
                        <h3 class="text-xl font-semibold mb-4">AI 정책 도우미 기술 구성</h3>
                        <div class="bg-blue-50 p-4 rounded-md mb-6">
                            <h4 class="font-medium mb-2">RAG(Retrieval-Augmented Generation) 기반 시스템</h4>
                            <p class="text-sm text-gray-700 mb-3">
                                본 시스템은 LangChain 프레임워크를 활용한 RAG 아키텍처를 기반으로 구현되었습니다. 이는 대규모 언어 모델(LLM)의 추론 능력과 다양한 데이터 소스에서 실시간으로 정보를 검색하는 기능을 결합하여, 사용자의 질문에 정확하고 맥락에 맞는 응답을 제공합니다.
                            </p>
                            <div class="bg-white p-3 rounded-md">
                                <h5 class="text-sm font-medium mb-1">주요 구성 요소:</h5>
                                <ul class="text-xs space-y-1 list-disc pl-4">
                                    <li><strong>벡터 데이터베이스</strong>: 따릉이 이용 데이터, 대여소 정보, 과거 분석 보고서를 벡터화하여 효율적인 검색 지원</li>
                                    <li><strong>지식 그래프</strong>: 서울시 지역 정보, 교통 인프라, 대여소 간 관계를 구조화하여 컨텍스트 이해 향상</li>
                                    <li><strong>실시간 데이터 연동</strong>: 현재 따릉이 상태, 날씨, 교통 상황과 연계</li>
                                    <li><strong>멀티모달 처리</strong>: 지도, 그래프, 표 등 다양한 형태의 데이터를 함께 분석</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-gray-50 p-4 rounded-md">
                                <h4 class="font-medium mb-2">시뮬레이션 엔진</h4>
                                <p class="text-sm text-gray-700">
                                    정책 시뮬레이션을 위해 특화된 알고리즘을 구현했습니다. 이는 과거 데이터를 기반으로 대여소 변경, 거치대 수 조정 등의 정책 변화가 미치는 영향을 예측합니다. 머신러닝 기법을 활용해 시간대별, 계절별 변동성까지 고려한 추정이 가능합니다.
                                </p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-md">
                                <h4 class="font-medium mb-2">자동 시각화 모듈</h4>
                                <p class="text-sm text-gray-700">
                                    분석 결과를 직관적으로 이해할 수 있도록 자동 시각화 기능을 제공합니다. 회전율, 불균형 지수, 이용 패턴 등 복잡한 데이터를 차트, 지도, 히트맵 등 적절한 형태로 변환하여 정책 결정을 돕습니다.
                                </p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-md mb-6">
                            <h4 class="font-medium mb-2">향후 개발 계획 - AI 정책 도우미 고도화</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-3">
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="text-sm font-medium mb-1">1단계: 데이터 확장</div>
                                    <ul class="text-xs space-y-1 list-disc pl-4">
                                        <li>서울시 전체 자치구 데이터 통합</li>
                                        <li>과거 5년 데이터 인덱싱</li>
                                        <li>교통, 인구, 기상 데이터 연계</li>
                                    </ul>
                                </div>
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="text-sm font-medium mb-1">2단계: 모델 고도화</div>
                                    <ul class="text-xs space-y-1 list-disc pl-4">
                                        <li>특화 파인튜닝 모델 개발</li>
                                        <li>다단계 시뮬레이션 엔진 구축</li>
                                        <li>예측 정확도 향상 작업</li>
                                    </ul>
                                </div>
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="text-sm font-medium mb-1">3단계: 기능 확장</div>
                                    <ul class="text-xs space-y-1 list-disc pl-4">
                                        <li>정책 비교 분석 도구 추가</li>
                                        <li>리포트 자동 생성 기능</li>
                                        <li>타 교통수단 연계 분석</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-center mb-6">
                            <img src="images/rag_architecture.png" alt="RAG 아키텍처 다이어그램" class="max-w-full h-auto rounded-lg shadow-lg">
                        </div>
                    </div>
                    
                    <div class="card h-full">
                        <h3 class="text-xl font-semibold mb-4">시각화 및 분석</h3>
                        <div class="bg-gray-50 p-4 rounded-md mb-4">
                            <h4 class="font-medium mb-2">회기역 대여소 거치대 증설 효과 분석</h4>
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>거치대 수</th>
                                            <th>회전율 (회/일)</th>
                                            <th>불균형 지수</th>
                                            <th>첨두시간 대여가능률</th>
                                            <th>연간 재배치 비용 절감</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>현재 (8개)</td>
                                            <td>3.5</td>
                                            <td>0.87</td>
                                            <td>15%</td>
                                            <td>-</td>
                                        </tr>
                                        <tr>
                                            <td>10개</td>
                                            <td>2.8</td>
                                            <td>0.75</td>
                                            <td>35%</td>
                                            <td>약 230만원</td>
                                        </tr>
                                        <tr>
                                            <td>12개</td>
                                            <td>2.3</td>
                                            <td>0.65</td>
                                            <td>60%</td>
                                            <td>약 380만원</td>
                                        </tr>
                                        <tr class="bg-green-50">
                                            <td>15개 (추천)</td>
                                            <td>1.9</td>
                                            <td>0.54</td>
                                            <td>85%</td>
                                            <td>약 520만원</td>
                                        </tr>
                                        <tr>
                                            <td>18개</td>
                                            <td>1.5</td>
                                            <td>0.48</td>
                                            <td>92%</td>
                                            <td>약 580만원</td>
                                        </tr>
                                        <tr>
                                            <td>20개</td>
                                            <td>1.2</td>
                                            <td>0.45</td>
                                            <td>95%</td>
                                            <td>약 610만원</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <p class="text-sm text-gray-600 mt-4">
                                거치대 15개로 증설 시, 초기 투자 비용은 약 210만원으로 예상되며, 연간 재배치 비용 절감액(520만원)을 고려하면 약 5개월 내에 투자금 회수가 가능합니다.
                            </p>
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-md">
                            <h4 class="font-medium mb-2">동대문구 효율적 대여소 분포</h4>
                            <div id="efficient-stations-map-container" class="mb-3">
                                <!-- Map will be rendered here -->
                            </div>
                            <div class="overflow-x-auto mt-4">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>순위</th>
                                            <th>대여소명</th>
                                            <th>회전율 (회/일)</th>
                                            <th>불균형 지수</th>
                                            <th>일평균 대여건수</th>
                                            <th>추천 거치대 수</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="bg-green-50">
                                            <td>1</td>
                                            <td>회기역 2-①번출구 (ID: 2933)</td>
                                            <td>3.5</td>
                                            <td>0.87</td>
                                            <td>28.4</td>
                                            <td>15개 (현재 8개)</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>서울시립대 정문 앞 A (ID: 275)</td>
                                            <td>2.8</td>
                                            <td>0.76</td>
                                            <td>22.5</td>
                                            <td>20개 (현재 10개)</td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>청량리역 4번 5번출구 사이 (ID: 2277)</td>
                                            <td>2.1</td>
                                            <td>0.92</td>
                                            <td>18.6</td>
                                            <td>15개 (현재 9개)</td>
                                        </tr>
                                        <tr>
                                            <td>4</td>
                                            <td>신설동역 1번출구 (ID: 2276)</td>
                                            <td>1.9</td>
                                            <td>0.68</td>
                                            <td>17.2</td>
                                            <td>현행 유지 (12개)</td>
                                        </tr>
                                        <tr>
                                            <td>5</td>
                                            <td>경희대학교 앞 (ID: 3912)</td>
                                            <td>1.8</td>
                                            <td>0.72</td>
                                            <td>16.5</td>
                                            <td>현행 유지 (10개)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Page -->
    <section id="admin" class="section px-4">
        <div class="container mx-auto py-10">
            <h2 class="text-3xl font-bold mb-8">관리자 페이지</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-1">
                    <div class="card">
                        <h3 class="text-xl font-semibold mb-4">데이터 업로드</h3>
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-1">데이터 유형</label>
                            <select class="w-full p-2 border rounded">
                                <option>대여 기록 데이터</option>
                                <option>대여소 정보 데이터</option>
                                <option>날씨 데이터</option>
                                <option>행사/축제 데이터</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-1">파일 선택</label>
                            <div class="border-2 border-dashed border-gray-300 p-6 rounded-md text-center">
                                <i class="fas fa-file-csv text-3xl text-gray-400 mb-2"></i>
                                <p class="text-sm text-gray-600 mb-2">CSV 파일을 여기에 끌어다 놓거나</p>
                                <button class="px-4 py-2 bg-gray-200 rounded text-sm">파일 선택</button>
                                <p class="text-xs text-gray-500 mt-2">최대 파일 크기: 100MB</p>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-1">분석 기간</label>
                            <div class="grid grid-cols-2 gap-2">
                                <input type="date" class="p-2 border rounded" placeholder="시작일">
                                <input type="date" class="p-2 border rounded" placeholder="종료일">
                            </div>
                        </div>
                        <button class="btn-primary w-full">데이터 업로드 및 분석</button>
                    </div>
                </div>
                
                <div class="lg:col-span-2">
                    <div class="card mb-6">
                        <h3 class="text-xl font-semibold mb-4">분석 관리</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead>
                                    <tr class="bg-gray-50">
                                        <th class="px-4 py-2 text-left text-sm font-medium">분석 이름</th>
                                        <th class="px-4 py-2 text-left text-sm font-medium">자치구</th>
                                        <th class="px-4 py-2 text-left text-sm font-medium">생성일</th>
                                        <th class="px-4 py-2 text-left text-sm font-medium">상태</th>
                                        <th class="px-4 py-2 text-left text-sm font-medium">작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-t">
                                        <td class="px-4 py-3">동대문구 2023년 분석</td>
                                        <td class="px-4 py-3">동대문구</td>
                                        <td class="px-4 py-3">2023-12-15</td>
                                        <td class="px-4 py-3"><span class="text-xs bg-green-500 text-white px-2 py-1 rounded">완료</span></td>
                                        <td class="px-4 py-3">
                                            <button class="text-blue-500 hover:text-blue-700 mr-2"><i class="fas fa-eye"></i></button>
                                            <button class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr class="border-t">
                                        <td class="px-4 py-3">성북구 효율성 분석</td>
                                        <td class="px-4 py-3">성북구</td>
                                        <td class="px-4 py-3">2023-11-30</td>
                                        <td class="px-4 py-3"><span class="text-xs bg-yellow-500 text-white px-2 py-1 rounded">진행중</span></td>
                                        <td class="px-4 py-3">
                                            <button class="text-blue-500 hover:text-blue-700 mr-2"><i class="fas fa-eye"></i></button>
                                            <button class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr class="border-t">
                                        <td class="px-4 py-3">전체 지역 대여-반납 패턴</td>
                                        <td class="px-4 py-3">전체</td>
                                        <td class="px-4 py-3">2023-10-20</td>
                                        <td class="px-4 py-3"><span class="text-xs bg-green-500 text-white px-2 py-1 rounded">완료</span></td>
                                        <td class="px-4 py-3">
                                            <button class="text-blue-500 hover:text-blue-700 mr-2"><i class="fas fa-eye"></i></button>
                                            <button class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 class="text-xl font-semibold mb-4">현재 분석 상태</h3>
                        <div class="mb-4">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-medium">성북구 효율성 분석</span>
                                <span class="text-sm text-gray-600">68%</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar" style="width: 68%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-md">
                            <h4 class="font-medium mb-2">분석 단계</h4>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                    <span class="text-sm">1. 데이터 로드 및 전처리</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                    <span class="text-sm">2. 대여-반납 패턴 분석</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-spinner fa-spin text-blue-500 mr-2"></i>
                                    <span class="text-sm">3. 공간 패턴 분석 (진행중...)</span>
                                </div>
                                <div class="flex items-center text-gray-400">
                                    <i class="far fa-circle mr-2"></i>
                                    <span class="text-sm">4. 네트워크 중심성 분석</span>
                                </div>
                                <div class="flex items-center text-gray-400">
                                    <i class="far fa-circle mr-2"></i>
                                    <span class="text-sm">5. 최적화 시뮬레이션</span>
                                </div>
                                <div class="flex items-center text-gray-400">
                                    <i class="far fa-circle mr-2"></i>
                                    <span class="text-sm">6. 리포트 생성</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4 flex justify-end">
                            <button class="btn-secondary mr-2">분석 취소</button>
                            <button class="btn-primary">자세히 보기</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-800 text-white py-8 px-4">
        <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">서울시 공공자전거 정책지원 플랫폼</h3>
                    <p class="text-gray-300 text-sm">
                        2025 국토교통부 데이터 활용 경진대회 참가 프로젝트<br>
                        공공자전거 정책 결정을 위한 데이터 분석 플랫폼
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">데이터 출처</h3>
                    <ul class="text-gray-300 text-sm space-y-2">
                        <li>서울 열린데이터 광장</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">연락처</h3>
                    <p class="text-gray-300 text-sm">
                        이메일: khubikeseoul@gmail.com<br>
                        따릉따릉팀(경희대 빅데이터 석사과정 1기팀)<br>
                        © 2025 서울시 공공자전거 정책지원 플랫폼
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script>
        // Navigation functions
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.getAttribute('onclick') && item.getAttribute('onclick').includes(sectionId)) {
                    item.classList.add('active');
                }
            });
            
            // Initialize maps if needed
            if (sectionId === 'districts') {
                initDistrictsMap();
            } else if (sectionId === 'station-detail') {
                initDetailMap();
                initSimulationChart();
                // 대여소 필터 적용
                if (typeof applyFilter === 'function') {
                    applyFilter();
                }
            } else if (sectionId === 'ai-agent') {
                initEfficientStationsMap();
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
            } else {
                menu.classList.add('hidden');
            }
        }
        
        // Initialize Seoul districts map
        function initDistrictsMap() {
            if (document.getElementById('districts-map-initialized')) return;
            
            const map = L.map('map').setView([37.5665, 126.9780], 11);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            // Simplified GeoJSON of Seoul's districts (would normally use a complete file)
            const districts = [
                { name: '동대문구', latlng: [37.5744, 127.0395], color: '#15AD58' },
                { name: '종로구', latlng: [37.5720, 126.9793], color: '#ccc' },
                { name: '중구', latlng: [37.5640, 126.9975], color: '#ccc' },
                { name: '용산구', latlng: [37.5311, 126.9810], color: '#ccc' },
                { name: '성동구', latlng: [37.5509, 127.0368], color: '#ccc' },
                { name: '광진구', latlng: [37.5384, 127.0822], color: '#ccc' },
                { name: '중랑구', latlng: [37.5939, 127.0932], color: '#ccc' },
                { name: '성북구', latlng: [37.5893, 127.0161], color: '#ccc' },
                { name: '강북구', latlng: [37.6396, 127.0257], color: '#ccc' },
                { name: '도봉구', latlng: [37.6688, 127.0470], color: '#ccc' },
                { name: '노원구', latlng: [37.6542, 127.0568], color: '#ccc' },
                { name: '은평구', latlng: [37.6026, 126.9291], color: '#ccc' },
                { name: '서대문구', latlng: [37.5791, 126.9368], color: '#ccc' },
                { name: '마포구', latlng: [37.5563, 126.9082], color: '#ccc' },
                { name: '양천구', latlng: [37.5169, 126.8661], color: '#ccc' },
                { name: '강서구', latlng: [37.5509, 126.8491], color: '#ccc' },
                { name: '구로구', latlng: [37.4954, 126.8874], color: '#ccc' },
                { name: '금천구', latlng: [37.4566, 126.9016], color: '#ccc' },
                { name: '영등포구', latlng: [37.5263, 126.8969], color: '#ccc' },
                { name: '동작구', latlng: [37.5124, 126.9393], color: '#ccc' },
                { name: '관악구', latlng: [37.4784, 126.9516], color: '#ccc' },
                { name: '서초구', latlng: [37.4837, 127.0324], color: '#ccc' },
                { name: '강남구', latlng: [37.5173, 127.0473], color: '#ccc' },
                { name: '송파구', latlng: [37.5048, 127.1144], color: '#ccc' },
                { name: '강동구', latlng: [37.5301, 127.1238], color: '#ccc' }
            ];
            
            // Add circle markers for each district
            districts.forEach(district => {
                const circle = L.circle(district.latlng, {
                    color: district.color,
                    fillColor: district.color,
                    fillOpacity: 0.5,
                    radius: 2000
                }).addTo(map);
                
                // Add name label
                const label = L.divIcon({
                    className: 'district-label',
                    html: `<div style="background: rgba(255,255,255,0.8); padding: 2px 5px; border-radius: 3px; font-size: 12px;">${district.name}</div>`,
                    iconSize: [100, 20]
                });
                
                L.marker(district.latlng, { icon: label }).addTo(map);
                
                // Add click event
                circle.on('click', function() {
                    if (district.name === '동대문구') {
                        showSection('station-detail');
                    } else {
                        // For other districts, show coming soon message
                        const popup = L.popup()
                            .setLatLng(district.latlng)
                            .setContent(`<div style="text-align: center;"><strong>${district.name}</strong><br>분석 준비 중입니다.</div>`)
                            .openOn(map);
                    }
                });
                
                // Add hover effect
                circle.on('mouseover', function() {
                    if (district.name !== '동대문구') {
                        circle.setStyle({ fillColor: '#15AD58', color: '#15AD58' });
                    }
                });
                
                circle.on('mouseout', function() {
                    if (district.name !== '동대문구') {
                        circle.setStyle({ fillColor: district.color, color: district.color });
                    }
                });
            });
            
            // Add a marker to indicate the map is initialized
            document.getElementById('map').insertAdjacentHTML('beforeend', '<div id="districts-map-initialized" style="display:none;"></div>');
        }
        
        // Initialize station detail map
        function initDetailMap() {
            if (document.getElementById('detail-map-initialized')) return;
            
            const map = L.map('detail-map').setView([37.5894, 127.0595], 15);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            // Add station marker
            const stationMarker = L.circle([37.5894, 127.0595], {
                color: 'red',
                fillColor: 'red',
                fillOpacity: 0.6,
                radius: 50
            }).addTo(map);
            
            stationMarker.bindPopup(`
                <div style="text-align: center; min-width: 200px;">
                    <strong>회기역 2-①번출구 (ID: 2933)</strong><br>
                    <span>회전율: 3.5회/일</span><br>
                    <span>불균형 지수: 0.87</span>
                </div>
            `).openPopup();
            
            // Add nearby stations
            const nearbyStations = [
                { name: '경희대학교 청운관', latlng: [37.5946, 127.0519], flow: 'to' },
                { name: '회기로 교차로', latlng: [37.5874, 127.0560], flow: 'from' },
                { name: '휘경시장 입구', latlng: [37.5908, 127.0652], flow: 'to' },
                { name: '서울시립대 정문 앞', latlng: [37.5825, 127.0543], flow: 'from' }
            ];
            
            nearbyStations.forEach(station => {
                const color = station.flow === 'to' ? 'blue' : 'green';
                
                const marker = L.circle(station.latlng, {
                    color: color,
                    fillColor: color,
                    fillOpacity: 0.6,
                    radius: 40
                }).addTo(map);
                
                marker.bindPopup(`
                    <div style="text-align: center;">
                        <strong>${station.name}</strong><br>
                        <span>주요 ${station.flow === 'to' ? '도착지' : '출발지'}</span>
                    </div>
                `);
                
                // Add flow line
                const line = L.polyline([
                    [37.5894, 127.0595],
                    station.latlng
                ], {
                    color: color,
                    weight: 2,
                    opacity: 0.6,
                    dashArray: '5, 5'
                }).addTo(map);
            });
            
            // Add a marker to indicate the map is initialized
            document.getElementById('detail-map').insertAdjacentHTML('beforeend', '<div id="detail-map-initialized" style="display:none;"></div>');
        }
        
        // Initialize efficient stations map
        function initEfficientStationsMap() {
            if (document.getElementById('efficient-stations-map-initialized')) return;
            
            const mapContainer = document.getElementById('efficient-stations-map-container');
            const map = L.map(mapContainer).setView([37.5744, 127.0395], 13);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            // Add efficient stations
            const efficientStations = [
                { name: '회기역 2-①번출구', latlng: [37.5894, 127.0595], efficiency: 'high' },
                { name: '서울시립대 정문 앞 A', latlng: [37.5825, 127.0543], efficiency: 'high' },
                { name: '청량리역 4번 5번출구 사이', latlng: [37.5801, 127.0457], efficiency: 'medium' },
                { name: '신설동역 1번출구', latlng: [37.5759, 127.0246], efficiency: 'medium' },
                { name: '경희대학교 앞', latlng: [37.5946, 127.0519], efficiency: 'medium' }
            ];
            
            efficientStations.forEach(station => {
                // Determine marker color based on efficiency
                let markerColor;
                let markerRadius;
                
                if (station.efficiency === 'high') {
                    markerColor = '#15AD58'; // primary green
                    markerRadius = 80;
                } else if (station.efficiency === 'medium') {
                    markerColor = '#1D64A6'; // secondary blue
                    markerRadius = 60;
                } else {
                    markerColor = '#767676'; // gray
                    markerRadius = 40;
                }
                
                const marker = L.circle(station.latlng, {
                    color: markerColor,
                    fillColor: markerColor,
                    fillOpacity: 0.6,
                    radius: markerRadius
                }).addTo(map);
                
                marker.bindPopup(`
                    <div style="text-align: center; min-width: 180px;">
                        <strong>${station.name}</strong><br>
                        <span>효율성: ${station.efficiency === 'high' ? '높음' : station.efficiency === 'medium' ? '중간' : '낮음'}</span>
                    </div>
                `);
            });
            
            // Add a marker to indicate the map is initialized
            mapContainer.insertAdjacentHTML('beforeend', '<div id="efficient-stations-map-initialized" style="display:none;"></div>');
        }
        
        // Simulation Chart
        function initSimulationChart() {
            if (document.getElementById('simulation-chart-initialized')) return;
            
            const ctx = document.getElementById('simulation-chart').getContext('2d');
            
            const data = {
                labels: ['8개', '10개', '12개', '15개', '18개', '20개'],
                datasets: [
                    {
                        label: '회전율 (회/일)',
                        data: [3.5, 2.8, 2.3, 1.9, 1.5, 1.2],
                        borderColor: '#15AD58',
                        backgroundColor: 'rgba(21, 173, 88, 0.1)',
                        yAxisID: 'y',
                    },
                    {
                        label: '불균형 지수',
                        data: [0.87, 0.75, 0.65, 0.54, 0.48, 0.45],
                        borderColor: '#1D64A6',
                        backgroundColor: 'rgba(29, 100, 166, 0.1)',
                        yAxisID: 'y1',
                    }
                ]
            };
            
            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    stacked: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '거치대 수에 따른 성능 변화'
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '회전율 (회/일)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '불균형 지수'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                            min: 0,
                            max: 1,
                        },
                        x: {
                            title: {
                                display: true,
                                text: '거치대 수'
                            }
                        }
                    }
                },
            };
            
            const myChart = new Chart(ctx, config);
            
            // Add a marker to indicate the chart is initialized
            document.getElementById('simulation-chart').insertAdjacentHTML('afterend', '<div id="simulation-chart-initialized" style="display:none;"></div>');
        }
        
        // Rack adjustment functions
        function decreaseRacks() {
            let currentValue = parseInt(document.getElementById('racks-input').value);
            if (currentValue > 1) {
                document.getElementById('racks-input').value = currentValue - 1;
            }
        }
        
        function increaseRacks() {
            let currentValue = parseInt(document.getElementById('racks-input').value);
            document.getElementById('racks-input').value = currentValue + 1;
        }
        
        function runSimulation() {
            const racks = parseInt(document.getElementById('racks-input').value);
            
            // Calculate simulated values
            let turnoverRate, imbalanceIndex, waitingRate;
            
            if (racks <= 8) {
                turnoverRate = 3.5;
                imbalanceIndex = 0.87;
                waitingRate = 8;
            } else if (racks <= 12) {
                turnoverRate = 2.3;
                imbalanceIndex = 0.65;
                waitingRate = 15;
            } else if (racks <= 15) {
                turnoverRate = 1.9;
                imbalanceIndex = 0.54;
                waitingRate = 25;
            } else {
                turnoverRate = 1.5;
                imbalanceIndex = 0.48;
                waitingRate = 35;
            }
            
            // Update UI
            const simulationTurnover = document.getElementById('simulation-turnover');
            const simulationImbalance = document.getElementById('simulation-imbalance');
            const simulationWaiting = document.getElementById('simulation-waiting');
            
            simulationTurnover.innerHTML = `
                <h4 class="font-medium mb-2">회전율 변화</h4>
                <div class="flex items-center">
                    <div class="text-3xl font-bold text-green-600">3.5</div>
                    <div class="ml-2 text-sm">
                        <div class="font-medium">현재</div>
                        <div class="text-gray-600">회/일</div>
                    </div>
                </div>
                <div class="h-8 flex items-center">
                    <i class="fas fa-arrow-right text-gray-400 mr-2"></i>
                </div>
                <div class="flex items-center">
                    <div class="text-3xl font-bold text-green-600">${turnoverRate.toFixed(1)}</div>
                    <div class="ml-2 text-sm">
                        <div class="font-medium">${racks}개 설정 시</div>
                        <div class="text-gray-600">회/일</div>
                    </div>
                </div>
            `;
            
            simulationImbalance.innerHTML = `
                <h4 class="font-medium mb-2">불균형 개선</h4>
                <div class="flex items-center">
                    <div class="text-3xl font-bold text-blue-600">0.87</div>
                    <div class="ml-2 text-sm">
                        <div class="font-medium">현재</div>
                        <div class="text-gray-600">불균형 지수</div>
                    </div>
                </div>
                <div class="h-8 flex items-center">
                    <i class="fas fa-arrow-right text-gray-400 mr-2"></i>
                </div>
                <div class="flex items-center">
                    <div class="text-3xl font-bold text-blue-600">${imbalanceIndex.toFixed(2)}</div>
                    <div class="ml-2 text-sm">
                        <div class="font-medium">${racks}개 설정 시</div>
                        <div class="text-gray-600">불균형 지수</div>
                    </div>
                </div>
            `;
            
            simulationWaiting.innerHTML = `
                <h4 class="font-medium mb-2">대기/미사용률</h4>
                <div class="flex items-center">
                    <div class="text-3xl font-bold text-red-600">8%</div>
                    <div class="ml-2 text-sm">
                        <div class="font-medium">현재</div>
                        <div class="text-gray-600">평균 대기율</div>
                    </div>
                </div>
                <div class="h-8 flex items-center">
                    <i class="fas fa-arrow-right text-gray-400 mr-2"></i>
                </div>
                <div class="flex items-center">
                    <div class="text-3xl font-bold text-red-600">${waitingRate}%</div>
                    <div class="ml-2 text-sm">
                        <div class="font-medium">${racks}개 설정 시</div>
                        <div class="text-gray-600">평균 대기율</div>
                    </div>
                </div>
            `;
        }
        
        // AI Chat functions
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message) {
                // Add user message
                const chatContainer = document.getElementById('chat-container');
                chatContainer.innerHTML += `
                    <div class="user-message">
                        ${message}
                    </div>
                `;
                
                // Clear input
                input.value = '';
                
                // Scroll to bottom
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                // Simulate AI response (in a real app, this would call an API)
                setTimeout(() => {
                    // For demo, just add a simple response
                    let response = "현재 이 기능은 데모 버전으로, RAG(Retrieval-Augmented Generation) 기반의 AI 시스템이 구현 중입니다. 완성 버전에서는 서울시 따릉이 데이터를 기반으로 상세한 응답을 제공할 예정입니다.";
                    
                    // If the message contains specific keywords, provide canned responses
                    if (message.includes('대여소') && message.includes('추천')) {
                        response = `
                            <div class="mb-2">동대문구 내 신규 대여소 설치가 권장되는 최우선 입지 3곳은 다음과 같습니다:</div>
                            
                            <ol class="mt-2 space-y-3 text-sm">
                                <li>
                                    <strong>1. 휘경동 주민센터 인근 (우선순위: 상)</strong><br>
                                    - 위치: 휘경동 73-2 부근<br>
                                    - 근거: 반경 500m 내 대여소 부재, 주변 인구밀도 높음(8,200명/km²)<br>
                                    - 예상 회전율: 1.8회/일 (구 평균 대비 18% 높음)<br>
                                    - 주변 환경: 주거단지, 상업시설, 버스정류장 4개
                                </li>
                                <li>
                                    <strong>2. 장안동 이마트 앞 (우선순위: 상)</strong><br>
                                    - 위치: 장안동 329-2 부근<br>
                                    - 근거: 상업시설 연계성, 유동인구 분석 결과(일 5,600명)<br>
                                    - 예상 회전율: 2.1회/일 (구 평균 대비 37% 높음)<br>
                                    - 혼잡도 예측: 출근시간 대여 집중, 저녁시간 반납 집중
                                </li>
                                <li>
                                    <strong>3. 서울시립대 후문 (우선순위: 중)</strong><br>
                                    - 위치: 전농동 197-1 부근<br>
                                    - 근거: 학생 수요 분석, 주변 대여소 불균형 완화 효과<br>
                                    - 예상 회전율: 1.7회/일<br>
                                    - 특이사항: 학기 중/방학 중 격차 고려 필요
                                </li>
                            </ol>
                            
                            <div class="mt-2">이 추천은 인구밀도, 대중교통 접근성, 상업시설 분포, 주변 대여소 이용률, 그리고 이동 패턴 데이터를 종합적으로 분석한 결과입니다.</div>
                        `;
                    } else if (message.includes('불균형') && message.includes('원인')) {
                        response = `
                            동대문구의 대여-반납 불균형 주요 원인은 다음과 같습니다:
                            
                            <ol class="mt-2 space-y-2 text-sm">
                                <li>
                                    <strong>1. 지형적 요인 (40%)</strong><br>
                                    동대문구는 북측(회기, 휘경동)이 남측(용두, 신설동)보다 평균 35m 높은 고도에 위치합니다. 
                                    이로 인해 아침에는 내리막길 방향인 남측으로의 대여가 많고, 저녁에는 반대로 남측에서 대여가 많으나 
                                    반납률이 낮아 재배치 필요성이 높아집니다.
                                </li>
                                <li>
                                    <strong>2. 출퇴근 패턴 (35%)</strong><br>
                                    회기역, 청량리역 등 주요 환승역 인근 대여소는 아침 출근 시간(7-9시)에 대여가 집중되고, 
                                    저녁 퇴근 시간(18-20시)에 반납이 집중됩니다. 특히 회기역 대여소의 경우 오전 8시 대여율이 
                                    동일 대여소 하루 평균 대비 380%에 달합니다.
                                </li>
                                <li>
                                    <strong>3. 대학생 이용 패턴 (15%)</strong><br>
                                    경희대, 서울시립대 인근 대여소는 수업 시작 시간(9-10시)과 종료 시간(16-18시)에 
                                    이용이 집중되며, 학기 중/방학 중 이용률 차이가 최대 65%에 달해 계절성이 뚜렷합니다.
                                </li>
                                <li>
                                    <strong>4. 여가 목적 이용 (10%)</strong><br>
                                    배봉산, 천호대로 자전거 도로 인근 대여소는 주말 및 공휴일 이용 패턴이 뚜렷하며, 
                                    대여-반납 간 시간차가 평일보다 2.7배 길어 장시간 이용으로 인한 일시적 불균형이 발생합니다.
                                </li>
                            </ol>
                            
                            이러한 원인을 종합적으로 고려한 재배치 전략 수립이 필요합니다.
                        `;
                    }
                    
                    chatContainer.innerHTML += `
                        <div class="ai-message">
                            ${response}
                        </div>
                    `;
                    
                    // Scroll to bottom again
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 1000);
            }
        }
        
        function setQuestion(element) {
            document.getElementById('chat-input').value = element.innerText;
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            // Set default section
            showSection('landing');
            
            // Add enter key support for chat
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });

        // 대여소 데이터 (필터링용)
        const stations = [
            {
                id: '2933',
                name: '회기역 2-①번출구',
                address: '서울특별시 동대문구 휘경동 267-10',
                turnover: 3.5,
                imbalance: 0.87,
                usage: 28.4,
                status: 'hot'
            },
            {
                id: '275',
                name: '서울시립대 정문 앞 A',
                address: '서울특별시 동대문구 전농동 135-5',
                turnover: 2.8,
                imbalance: 0.76,
                usage: 22.5,
                status: 'hot'
            },
            {
                id: '2277',
                name: '청량리역 4번 5번출구 사이',
                address: '서울특별시 동대문구 왕산로 202-1',
                turnover: 2.1,
                imbalance: 0.92,
                usage: 18.6,
                status: 'warning'
            },
            {
                id: '2276',
                name: '신설동역 1번출구',
                address: '서울특별시 동대문구 왕산로 20',
                turnover: 1.9,
                imbalance: 0.68,
                usage: 17.2,
                status: 'medium'
            },
            {
                id: '3333',
                name: '신설동역 4번출구',
                address: '서울특별시 동대문구 왕산로 20',
                turnover: 0.5,
                imbalance: 0.35,
                usage: 4.0,
                status: 'low'
            },
            {
                id: '274',
                name: '용두동 래미안허브리츠아파트 앞',
                address: '서울특별시 동대문구 용두동 696-13',
                turnover: 0.7,
                imbalance: 0.42,
                usage: 5.6,
                status: 'low'
            },
            {
                id: '389',
                name: '전농초등학교 건너편',
                address: '서울특별시 동대문구 전농동 693-1',
                turnover: 0.6,
                imbalance: 0.38,
                usage: 4.8,
                status: 'low'
            },
            {
                id: '1631',
                name: '제기동역 1번출구',
                address: '서울특별시 동대문구 왕산로 87',
                turnover: 1.2,
                imbalance: 0.70,
                usage: 9.6,
                status: 'warning'
            }
        ];

        // 필터 적용 함수
        function applyFilter() {
            const filterType = document.getElementById('station-filter').value;
            let sortedStations = [...stations];
            
            // 필터 타입에 따라 정렬
            if (filterType === 'usage') {
                sortedStations.sort((a, b) => b.usage - a.usage);
            } else if (filterType === 'imbalance') {
                sortedStations.sort((a, b) => b.imbalance - a.imbalance);
            } else if (filterType === 'turnover-low') {
                sortedStations.sort((a, b) => a.turnover - b.turnover);
            } else if (filterType === 'turnover-high') {
                sortedStations.sort((a, b) => b.turnover - a.turnover);
            }
            
            // 정렬된 대여소 목록 표시
            const stationListContainer = document.querySelector('.lg\\:col-span-1 .card .space-y-3');
            stationListContainer.innerHTML = '';
            
            sortedStations.forEach(station => {
                let statusClass = '';
                let statusText = '';
                
                if (station.status === 'hot') {
                    statusClass = 'bg-green-500';
                    statusText = '핫스팟';
                } else if (station.status === 'warning') {
                    statusClass = 'bg-yellow-500';
                    statusText = '개선 필요';
                } else if (station.status === 'low') {
                    statusClass = 'bg-red-500';
                    statusText = '저활용';
                } else {
                    statusClass = 'bg-blue-500';
                    statusText = '보통';
                }
                
                const isActive = station.id === '2933';
                const activeClass = isActive ? 'bg-green-50 border-green-200' : '';
                
                stationListContainer.innerHTML += `
                    <div class="border p-3 rounded-md cursor-pointer hover:bg-gray-50 ${activeClass}" onclick="selectStation('${station.id}')">
                        <div class="flex justify-between mb-1">
                            <h4 class="font-medium">${station.name} (ID: ${station.id})</h4>
                            <span class="text-xs ${statusClass} text-white px-2 py-1 rounded">${statusText}</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">${station.address}</p>
                        <div class="flex justify-between text-sm">
                            <span>회전율: <b>${station.turnover}회/일</b></span>
                            <span>불균형 지수: <b>${station.imbalance}</b></span>
                        </div>
                    </div>
                `;
            });
        }

        // 대여소 선택 함수 (선택된 대여소 표시)
        function selectStation(stationId) {
            // 실제 구현에서는 선택된 대여소에 대한 상세 정보를 불러오는 로직 추가
            console.log('Selected station:', stationId);
            
            // 선택된 대여소 하이라이트
            document.querySelectorAll('.lg\\:col-span-1 .card .space-y-3 > div').forEach(el => {
                if (el.querySelector('h4').textContent.includes(`ID: ${stationId}`)) {
                    el.classList.add('bg-green-50', 'border-green-200');
                } else {
                    el.classList.remove('bg-green-50', 'border-green-200');
                }
            });
        }
    </script>
</body>
</html>
